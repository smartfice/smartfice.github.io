<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="django,mysql," />





  <link rel="alternate" href="/rss2.xml" title="Monkey'blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=" />






<meta name="description" content="1、当我把 DEBUG = True设为False的时候运行 Python manage.py runserver 的时候报错 ： CommandError: You must set settings.ALLOWED_HOSTS if DEBUG is False.解决方案：ALLOWED_HOSTS = [‘127.0.0.1’, ‘localhost’] 2、报错信息： ModelForm">
<meta name="keywords" content="django,mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="django mysql数据库错误相关问题">
<meta property="og:url" content="http://smartfice.com/mysql/index.html">
<meta property="og:site_name" content="Monkey&#39;blog">
<meta property="og:description" content="1、当我把 DEBUG = True设为False的时候运行 Python manage.py runserver 的时候报错 ： CommandError: You must set settings.ALLOWED_HOSTS if DEBUG is False.解决方案：ALLOWED_HOSTS = [‘127.0.0.1’, ‘localhost’] 2、报错信息： ModelForm">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://smartfice.com/mysql/imsges/banner.jpg">
<meta property="og:updated_time" content="2017-10-15T08:02:26.748Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="django mysql数据库错误相关问题">
<meta name="twitter:description" content="1、当我把 DEBUG = True设为False的时候运行 Python manage.py runserver 的时候报错 ： CommandError: You must set settings.ALLOWED_HOSTS if DEBUG is False.解决方案：ALLOWED_HOSTS = [‘127.0.0.1’, ‘localhost’] 2、报错信息： ModelForm">
<meta name="twitter:image" content="http://smartfice.com/mysql/imsges/banner.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://smartfice.com/mysql/"/>





  <title>django mysql数据库错误相关问题 | Monkey'blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Monkey'blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">welcome to monkey</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smartfice.com/mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="smartfice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars3.githubusercontent.com/u/31237700?v=4&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Monkey'blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">django mysql数据库错误相关问题</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-09T22:18:15+08:00">
                2017-08-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/django/" itemprop="url" rel="index">
                    <span itemprop="name">django</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="/mysql/imsges/banner.jpg" alt=""></p>
<h2 id="1、当我把-DEBUG-True设为False的时候运行-Python-manage-py-runserver-的时候"><a href="#1、当我把-DEBUG-True设为False的时候运行-Python-manage-py-runserver-的时候" class="headerlink" title="1、当我把 DEBUG = True设为False的时候运行 Python manage.py runserver 的时候"></a>1、当我把 DEBUG = True设为False的时候运行 Python manage.py runserver 的时候</h2><p>报错 ： CommandError: You must set settings.ALLOWED_HOSTS if DEBUG is False.<br>解决方案：<br>ALLOWED_HOSTS = [‘127.0.0.1’, ‘localhost’]</p>
<h2 id="2、报错信息："><a href="#2、报错信息：" class="headerlink" title="2、报错信息："></a>2、报错信息：</h2><p> ModelForm Creating a ModelForm without either the ‘fields’ attribute or the ‘exclude’ attribute<br>is prohibited; form AuthorForm needs updating. </p>
<h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><p>class AuthorForm(ModelForm):<br>class Meta:<br>model = Author<br>fields = “all” </p>
<h2 id="3、报错信息：-CSRF-token-missing-or-incorrect"><a href="#3、报错信息：-CSRF-token-missing-or-incorrect" class="headerlink" title="3、报错信息： CSRF token missing or incorrect"></a>3、报错信息： CSRF token missing or incorrect</h2><h3 id="解决方案：-1"><a href="#解决方案：-1" class="headerlink" title="解决方案："></a>解决方案：</h3><h3 id="第一种方法："><a href="#第一种方法：" class="headerlink" title="第一种方法："></a>第一种方法：</h3><ul>
<li>第一步、 在 templete 中, 为每个 POST form 增加一个 {<br><strong>csrf_token</strong></li>
<li>第二步、在 view 中, 使用 django.template.RequestContext 而不是 Context.<br>render_to_response, 默认使用 Context. 需要改成 RequestContext.<br>return render_to_response(‘systemofdingh/modify.html’, {‘form’: orderModelForm(instance=orderModify)},<br>context_instance=RequestContext(request))<h4 id="第二中方法："><a href="#第二中方法：" class="headerlink" title="第二中方法："></a>第二中方法：</h4></li>
</ul>
<ol>
<li><p>settings.py 中 MIDDLEWARE_CLASSES 中 注释掉’django.middleware.csrf.CsrfViewMiddleware’</p>
</li>
<li><p>在你的views.py 的方法上加上 @csrf_exempt 装饰 (需要 from django.views.decorators.csrf import csrf_exempt)</p>
</li>
</ol>
<ul>
<li>You are trying to add a non-nullable field ‘orderID’ to ordermodel without a default; <pre><code>we can&apos;t do that (the database needs something to populate existing rows).
</code></pre>Please select a fix: </li>
<li>Provide a one-off default now (will be set on all existing rows) </li>
<li>Quit, and let me add a default in models.py <h3 id="解决方案-删除migrate文件，然后重新来"><a href="#解决方案-删除migrate文件，然后重新来" class="headerlink" title="解决方案: 删除migrate文件，然后重新来"></a>解决方案: 删除migrate文件，然后重新来</h3>Django :<br>queryset的长度查询： len(queryset)<br>model对象转换成dict : model_to_dict<h2 id="问题：字段修改属性发生错误"><a href="#问题：字段修改属性发生错误" class="headerlink" title="问题：字段修改属性发生错误"></a>问题：字段修改属性发生错误</h2>1&gt;<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;python manage.py makemigrationsYou are trying to add a non-nullable field <span class="string">'price_monthly'</span> to product without a default; we can<span class="string">'t do that (the database needs something to populate existing rows).</span></div><div class="line"><span class="string">Please select a fix:</span></div><div class="line"><span class="string"> 1) Provide a one-off default now (will be set on all existing rows)</span></div><div class="line"><span class="string"> 2) Quit, and let me add a default in models.py</span></div><div class="line"><span class="string">Select an option:</span></div></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li>{这个可能是之前已创建了表中的一条记录，之后模型中增加了一个非空的字段，但是原来已经存在的记录没有这个值}<br>2&gt;<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;python manage.py migrate</div><div class="line"><span class="meta">... </span>...</div><div class="line"><span class="keyword">raise</span> errorclass(errno, errorvalue)django.db.utils.ProgrammingError: (<span class="number">1146</span>, <span class="string">"Table 'lab_data.bigdata_postgraduate_research_directions' doesn't exist"</span>)</div></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li><p>{这个是因为在字段中添加了blank=True或者 null=True引起的}<br>3&gt;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;python manage.py makemigrations</div><div class="line">You are trying to change the nullable field <span class="string">'job_title'</span> on professor to non-nullable without a default; we can<span class="string">'t do that (the database needs something to populate existing rows).</span></div><div class="line"><span class="string">Please select a fix:</span></div><div class="line"><span class="string"> 1) Provide a one-off default now (will be set on all existing rows)</span></div><div class="line"><span class="string"> 2) Ignore for now, and let me handle existing rows with NULL myself (e.g. adding a RunPython or RunSQL operation in the new migration file before the AlterField operation)</span></div><div class="line"><span class="string"> 3) Quit, and let me add a default in models.py</span></div><div class="line"><span class="string">Select an option:</span></div></pre></td></tr></table></figure>
</li>
<li><p>{这个是将模型中的null=True删除了之后产生的错误}<br>1&gt;原因解释：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1. The migrations system is designed so that a single migration can be applied to more than one database. For example, you could have a development version, a staging version, and one or more production versions. That&apos;s whymaking the migration is a distinct step from applying the migration, and whymakemgirations can&apos;t just look at the currently active database to see that it doesn&apos;t have any rows. What if you then try to apply the migration to a database that does?</div><div class="line">The solution in your case is simple: since there are no rows, option 1 (setting a default on all existing rows) won&apos;t do anything at all. So choose option 1, and any value you like.</div><div class="line">[Django 1.7.1 requires a Default value for field - but no entry is in database. Why?]</div><div class="line">2. Django adds a default &quot;id&quot; field to every model, you don&apos;t need an extra &quot;twitbot_id&quot; in your model. If a surrogate primary key is all you need, forget about &quot;twitbot_id&quot; because it will be a duplicate of the auto-generated &quot;id&quot;. Seehttps://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields</div><div class="line">If you add this and you already have TwitterBot objects in your database you must provide a default value to populate this column for existing rows in the database.</div><div class="line">[Can&apos;t seem to lose this error: “You are trying to add a non-nullable field”]</div></pre></td></tr></table></figure>
</li>
<li><p>如果你跟我一样是因为之前建好表a后，又创建一个表b作为a的父类，a中只有pass，那么因为表a已经创建，其中有数据，当a迁移时就会出现新表不能为null且没有指定默认值时就会出现这种错误。</p>
<h3 id="解决方案：-2"><a href="#解决方案：-2" class="headerlink" title="解决方案："></a>解决方案：</h3><h4 id="1-gt-在基类b中添加允许为空或者添加默认值，并设置b不建表（meta中的abstract-true）"><a href="#1-gt-在基类b中添加允许为空或者添加默认值，并设置b不建表（meta中的abstract-true）" class="headerlink" title="1&gt;在基类b中添加允许为空或者添加默认值，并设置b不建表（meta中的abstract = true）"></a>1&gt;在基类b中添加允许为空或者添加默认值，并设置b不建表（meta中的abstract = true）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span><span class="params">(models.Model)</span>:</span></div><div class="line">    <span class="string">'''</span></div><div class="line"><span class="string">    基类</span></div><div class="line"><span class="string">    '''</span>    title = models.CharField(max_length=<span class="number">150</span>, null=<span class="keyword">True</span>)</div><div class="line">    content = models.TextField(null=<span class="keyword">True</span>)</div><div class="line">    time_stamp = models.DateTimeField(auto_now_add=<span class="keyword">True</span>, default=timezone.now())</div><div class="line">    link = models.URLField(blank=<span class="keyword">True</span>, verbose_name=<span class="string">'url_link'</span>)</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></div><div class="line">        abstract = <span class="keyword">True</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>Note:DataTimeField好像与其它的不一样，不好改！<br>1&gt;2&gt;3&gt;<br>删除所有migrate文件(不用移除整个文件夹)，然后重来</p>
<h2 id="问题：manytomanyfeild没有默认值"><a href="#问题：manytomanyfeild没有默认值" class="headerlink" title="问题：manytomanyfeild没有默认值"></a>问题：manytomanyfeild没有默认值</h2><p>django admin gives warning “Field ‘X’ doesn’t have a default value”</p>
<h3 id="问题：添加元属性发生错误"><a href="#问题：添加元属性发生错误" class="headerlink" title="问题：添加元属性发生错误"></a>问题：添加元属性发生错误</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">raise</span> InternalError(errno, errorvalue)</div><div class="line">django.db.utils.InternalError: (<span class="number">1017</span>, <span class="string">"Can't find file: '.\\lab_data\\people_patent_prizes.frm' (errno: 2 -No such file or directory)"</span>)</div></pre></td></tr></table></figure>
<p>{模型类中增加class Meta:db_table=’People’使数据库中对应的表名修改成了People，原来的表间联系可能破坏了}<br>解决方案：<br>删除所有migrate文件(不用移除整个文件夹)，然后重来</p>
<h3 id="问题：表中字段不存在"><a href="#问题：表中字段不存在" class="headerlink" title="问题：表中字段不存在"></a>问题：表中字段不存在</h3><p>“Unknown column ‘name’ in ‘field list’”</p>
<p>django中创建了表professor继承了表people的字段，并且在后台可以看到，但实际在数据库中不存在（数据库中查询可看到）</p>
<h4 id="出现问题原因："><a href="#出现问题原因：" class="headerlink" title="出现问题原因："></a>出现问题原因：</h4><ul>
<li>model中编辑的字段没有在数据库对应的表里创建（原因可能是字段是继承自父类，出现的什么问题？）</li>
</ul>
<p>数据库中查看表中的字段：</p>
<ul>
<li>migration文件出了什么问题？导致没有同步到数据库（表都没创建）<br>解决方案1：<br>在数据库中手动添加没有创建的字段<br>alter table bigdata_professor add column name varchar(6);</li>
</ul>
<p>再次查看表中字段：</p>
<p>再次运行django服务器，后台添加name字段时就不会出错了。</p>
<h3 id="解决方案2："><a href="#解决方案2：" class="headerlink" title="解决方案2："></a>解决方案2：</h3><p>先删除整个migrations文件夹，再Python manage.py makemigrations,再python manage.py migrate</p>
<p>这样表就可以重新建立成功了！（可以查询到django中新建的表bigdata_professor….）</p>
<p>Note:</p>
<ol>
<li>成功后最好把之前删除的文件夹migrations重新建一个（app中的）</li>
<li>只删除migration文件可能不会出现这个问题：<br>No migrations to apply.   Your models have changes that are not yet reflected in a migration, and so won’t be applied. Run ‘manage.py makemigrations’ to make new migrations, and then re-run ‘manage.py migrate’ to apply them.</li>
</ol>
<p>我了个去，都不知道为啥migration文件会出问题，删除后再操作就没事了，可能是（在makemigrations）之前先进行了migrate操作？<br>[Django Models (1054, “Unknown column in ‘field list’”)]</p>
<h2 id="问题：表不存在或者No-migrations-to-apply"><a href="#问题：表不存在或者No-migrations-to-apply" class="headerlink" title="问题：表不存在或者No migrations to apply"></a>问题：表不存在或者No migrations to apply</h2><p> “Table ‘lab_data.bigdata_resdir’ doesn’t exist”</p>
<p>模型中建立新表后，makemigrations成功，但是migrate出现错误:</p>
<p>python manage.py migrate<br>Operations to …:<br>Apply all migrations: …<br>No migrations to apply.(即使实际上明明makemigrations成功，并且有许多migrations可以应用)<br>  Your models have changes that are not yet reflected in a migration, and so won’t be applied.  Run ‘manage.py makemigrations’ to make new migrations, and then re-run ‘manage.py migrate’ to apply them.</p>
<p>按照提示重新makemigration后migration文件就不会创建新表了，在数据库中表也的确没有新建。<br>原因：</p>
<ol>
<li>Sounds like your initial migration was faked because the table already existed (probably with an outdated schema):</li>
</ol>
<p>“This will make a new initial migration for your app. Now, when you run migrate,Django will detect that you have an initial migration and that the tables it wants to create already exist, and will mark the migration as already applied.”<br>Otherwise you would get an no-such-table error.[No migrations to apply, even though there are migrations to apply]</p>
<ol>
<li>也可能是之前按照某个说明执行了一次python manage.py migrate –fake导致的。–fake 的含义是不执行该迁移脚本但是标记该脚本已经被执行过。导致之后无法正常进行迁移。<h3 id="Django-1-7-中-migrate-无法执行而且表不存在的解决方案"><a href="#Django-1-7-中-migrate-无法执行而且表不存在的解决方案" class="headerlink" title="[Django 1.7 中 migrate 无法执行而且表不存在的解决方案]"></a>[Django 1.7 中 migrate 无法执行而且表不存在的解决方案]</h3><h3 id="解决方案：-3"><a href="#解决方案：-3" class="headerlink" title="解决方案："></a>解决方案：</h3><h4 id="方法1"><a href="#方法1" class="headerlink" title="方法1."></a>方法1.</h4></li>
</ol>
<ul>
<li>In MySQL Database delete row ‘app_name’ from the table ‘django_migrations’.<br>打开mysql command line client, 进入创建好的数据库use databasename; 查看表select * from django_migration; 发现将要执行的迁移脚本的 id 已经添加在表中了，将其删除即可，即删除最新一次app_name对就的id行。</li>
<li>Delete all migration files in migrations folder.</li>
<li>Try again python manage.py makemigrations and python manage.py migrate command.<br>[Django 1.7 - “No migrations to apply” when run migrate after makemigrations]<h4 id="方法2："><a href="#方法2：" class="headerlink" title="方法2："></a>方法2：</h4>移除整个migrations文件夹，重新makemigrations和migrate。之后就会自动创建了：</li>
</ul>
<h4 id="方法3："><a href="#方法3：" class="headerlink" title="方法3："></a>方法3：</h4><p>实在不行，只能drop database，再重新建立了。</p>
<h2 id="问题：外键修改成多对多错误"><a href="#问题：外键修改成多对多错误" class="headerlink" title="问题：外键修改成多对多错误"></a>问题：外键修改成多对多错误</h2><p>ValueError: Cannot alter field bigdata.Postgraduate.publisher into bigdata.Postgraduate.publisher - they are not compatible types (you cannot alter to or from M2M fields<br>, or add or remove through= on M2M fields)</p>
<p>{这个错误是由将模型Postgraduate中的publisher字段从ForeignKey修改成ManyToManyField引起的}<br>解决方案：<br>删除所有migrations文件，重新makemigrations和migrate<br>[foreignkey error: Django migration error :you cannot alter to or from M2M fields, or add or remove through= on M2M fields]</p>
<h2 id="数据库注册到site管理错误"><a href="#数据库注册到site管理错误" class="headerlink" title="数据库注册到site管理错误"></a>数据库注册到site管理错误</h2><p>TypeError: <strong>init</strong>() missing 2 required positional arguments : ‘model’ and ‘admin_site’</p>
<p>class DirectionsInline(inlineBase, admin.ModelAdmin):<br>    model = Directions<br>    inlines = [ImagesInline, ]<br>admin.site.register(Directions, DirectionsInline)</p>
<p>解决：原因可能是继承admin.ModelAdmin的类中不能有model = <em>*</em></p>
<h2 id="数据库权限错误"><a href="#数据库权限错误" class="headerlink" title="数据库权限错误"></a>数据库权限错误</h2><p>django.db.utils.operationalerror:&lt;1045,”access denied for user root@localhost using password yes&gt;<br>解决方案1：django setting.py文件中设置的database用户名或者密码错了，修改一下就可以了<br>或者是django运行项目时用的不是settings.py文件，这个在os.environ.setdefault(“DJANGO_SETTINGS_MODULE”, “labsite.settings”)中设置</p>
<h3 id="其它方案："><a href="#其它方案：" class="headerlink" title="其它方案："></a>其它方案：</h3><p>Access denied for user ‘root’@’localhost’ (using password: YES)</p>
<p>mysql Access denied for user root@localhost错误解决方法总结(转)<br>ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using password: NO)<br>MySQL Forums ::Install &amp; Repo ::ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using password: NO)<br>django.db.utils.operationalerror:&lt;2003, “can’t connect to mysql server on ‘127.0.0.1’(winerror 10061] No connection could be made because the target machine actively refused it)”)<br>settings.py中设置的host和port如下<br>‘HOST’: ‘127.0.0.1’,’PORT’: ‘3306’</p>
<p>如改动port为其它，可能导致该问题<br>其它问题：<br>1.Error: Tablespace for table xxx exists. Please DISCARD the tablespace before IMPORT</p>
<ol>
<li>django.db.utils.ProgrammingError: (1146, “Table ‘lab_data.django_migrations’ doesn’t exist”)<br>3.django.db.utils.InternalError: (1050, “Table ‘<code>l ab_data</code>.<code>django_migrations</code>‘already exists”)</li>
</ol>
<p>1&gt;两个模型的数据库表名设置成一样的了<br>class Meta:<br>    db_table = ‘WorkExp1’<br>2&gt;python manage.py migrate –fake<br>question:<br>django.db.utils.InternalError: (1050, “Table ‘s_user_address’ already exists”)</p>
<p>answer:<br>./manage.py migrate myapp –fake  指定app 跳转//<br>(py3_django) python@ubuntu:~/project/dailyfresh$ python manage.py migrate –fake</p>
<p>–fakeOperations to perform:<br>  Synchronize unmigrated apps: staticfiles, messages, haystack, tinymce<br>  Apply all migrations: admin, df_cart, df_goods, djcelery, sessions, userinfo, auth, contenttypes<br>Synchronizing apps without migrations:<br>  Creating tables…<br>    Running deferred SQL…<br>  Installing custom SQL…<br>Running migrations:<br>  Rendering model states… DONE<br>  Applying userinfo.0001_initial… FAKED<br>  Applying df_goods.0001_initial… FAKED<br>  Applying df_cart.0001_initial… FAKED<br>  Applying djcelery.0001_initial… FAKED<br>  Applying djcelery.0002_auto_20170825_1331… FAKED<br>  Applying djcelery.0003_auto_20170827_0832… FAKED<br>  Applying djcelery.0004_auto_20170827_1256… FAKED<br>  Applying djcelery.0005_auto_20170828_0819… FAKED<br>  Applying djcelery.0006_auto_20170828_0826… FAKED<br>  Applying djcelery.0007_auto_20170828_1725… FAKED<br>  Applying djcelery.0008_auto_20170831_0830… FAKED<br>  Applying djcelery.0009_auto_20170831_1510… FAKED<br>  Applying djcelery.0010_auto_20170831_1514… FAKED<br>  Applying djcelery.0011_auto_20170831_1526… FAKED<br>  Applying djcelery.0012_auto_20170831_1532… FAKED<br>  Applying djcelery.0013_auto_20170831_1539… FAKED<br>  Applying djcelery.0014_auto_20170831_1552… FAKED<br>  Applying djcelery.0015_auto_20170831_1608… FAKED<br>(py3_django) python@ubuntu:~/project/dailyfresh$ python manage.py migrate</p>
<p>Operations to perform:<br>  Synchronize unmigrated apps: tinymce, haystack, messages, staticfiles<br>  Apply all migrations: djcelery, auth, userinfo, admin, contenttypes, df_cart, sessions, df_goods<br>Synchronizing apps without migrations:<br>  Creating tables…<br>    Running deferred SQL…<br>  Installing custom SQL…<br>Running migrations:<br>  No migrations to apply.<br>  Your models have changes that are not yet reflected in a migration, and so won’t be applied.<br>  Run ‘manage.py makemigrations’ to make new migrations, and then re-run ‘manage.py migrate’ to apply them.</p>
<p>(py3_django) python@ubuntu:~/project/dailyfresh$ python manage.py migrate<br>Operations to perform:<br>  Synchronize unmigrated apps: messages, staticfiles, tinymce, haystack<br>  Apply all migrations: djcelery, df_goods, admin, df_cart, contenttypes, sessions, userinfo, auth<br>Synchronizing apps without migrations:<br>  Creating tables…<br>    Running deferred SQL…<br>  Installing custom SQL…<br>Running migrations:<br>  Rendering model states… DONE<br>  Applying df_cart.0001_initial… OK<br>(py3_django) python@ubuntu:~/project/dailyfresh$</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/django/" rel="tag"># django</a>
          
            <a href="/tags/mysql/" rel="tag"># mysql</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/middleware/" rel="next" title="Django middleware">
                <i class="fa fa-chevron-left"></i> Django middleware
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/images/index/" rel="prev" title="images">
                images <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="https://avatars3.githubusercontent.com/u/31237700?v=4&s=460"
              alt="smartfice" />
          
            <p class="site-author-name" itemprop="name">smartfice</p>
            <p class="site-description motion-element" itemprop="description">Python Django Scrapy jQuery</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/rss2.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、当我把-DEBUG-True设为False的时候运行-Python-manage-py-runserver-的时候"><span class="nav-number">1.</span> <span class="nav-text">1、当我把 DEBUG = True设为False的时候运行 Python manage.py runserver 的时候</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、报错信息："><span class="nav-number">2.</span> <span class="nav-text">2、报错信息：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解决方案："><span class="nav-number">2.1.</span> <span class="nav-text">解决方案：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、报错信息：-CSRF-token-missing-or-incorrect"><span class="nav-number">3.</span> <span class="nav-text">3、报错信息： CSRF token missing or incorrect</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解决方案：-1"><span class="nav-number">3.1.</span> <span class="nav-text">解决方案：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第一种方法："><span class="nav-number">3.2.</span> <span class="nav-text">第一种方法：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#第二中方法："><span class="nav-number">3.2.1.</span> <span class="nav-text">第二中方法：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决方案-删除migrate文件，然后重新来"><span class="nav-number">3.3.</span> <span class="nav-text">解决方案: 删除migrate文件，然后重新来</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题：字段修改属性发生错误"><span class="nav-number">4.</span> <span class="nav-text">问题：字段修改属性发生错误</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#解决方案：-2"><span class="nav-number">4.1.</span> <span class="nav-text">解决方案：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-gt-在基类b中添加允许为空或者添加默认值，并设置b不建表（meta中的abstract-true）"><span class="nav-number">4.1.1.</span> <span class="nav-text">1>在基类b中添加允许为空或者添加默认值，并设置b不建表（meta中的abstract = true）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题：manytomanyfeild没有默认值"><span class="nav-number">5.</span> <span class="nav-text">问题：manytomanyfeild没有默认值</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#问题：添加元属性发生错误"><span class="nav-number">5.1.</span> <span class="nav-text">问题：添加元属性发生错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#问题：表中字段不存在"><span class="nav-number">5.2.</span> <span class="nav-text">问题：表中字段不存在</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#出现问题原因："><span class="nav-number">5.2.1.</span> <span class="nav-text">出现问题原因：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决方案2："><span class="nav-number">5.3.</span> <span class="nav-text">解决方案2：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题：表不存在或者No-migrations-to-apply"><span class="nav-number">6.</span> <span class="nav-text">问题：表不存在或者No migrations to apply</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Django-1-7-中-migrate-无法执行而且表不存在的解决方案"><span class="nav-number">6.1.</span> <span class="nav-text">[Django 1.7 中 migrate 无法执行而且表不存在的解决方案]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决方案：-3"><span class="nav-number">6.2.</span> <span class="nav-text">解决方案：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#方法1"><span class="nav-number">6.2.1.</span> <span class="nav-text">方法1.</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法2："><span class="nav-number">6.2.2.</span> <span class="nav-text">方法2：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法3："><span class="nav-number">6.2.3.</span> <span class="nav-text">方法3：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题：外键修改成多对多错误"><span class="nav-number">7.</span> <span class="nav-text">问题：外键修改成多对多错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库注册到site管理错误"><span class="nav-number">8.</span> <span class="nav-text">数据库注册到site管理错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库权限错误"><span class="nav-number">9.</span> <span class="nav-text">数据库权限错误</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#其它方案："><span class="nav-number">9.1.</span> <span class="nav-text">其它方案：</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">smartfice</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v="></script>

  <script type="text/javascript" src="/js/src/motion.js?v="></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v="></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v="></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v="></script>
<script type="text/javascript" src="/js/src/post-details.js?v="></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v="></script>



  


  








  








  





  

  

  

  

  

  

</body>
</html>
